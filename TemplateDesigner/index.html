<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Template Designer</title>

	<link rel="stylesheet" type="text/css" href="src/templateDesigner.css">

	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="lib/jsrender-1.0.js"></script>
	<script type="text/javascript" src="src/articleRenderer.js"></script>
	<script type="text/javascript" src="src/publication.js"></script>
	<script type="text/javascript" src="src/templateDesigner.js"></script>

	<script type="text/javascript">

	'use strict'
	window.onload = function() {
		createTD();
		$("#savePage").click(function() { savePage(); });
		$("#openPage").click(function() { openPage(); });
	};

	var singleton;

	function createTD() {
		singleton = new ds.TemplateDesigner();
		singleton.loadFromServer(function() {
			var templateStr = JSON.stringify(singleton.getTemplate());
			$("#templateData").html(templateStr);
		});
	}

	function savePage() {
		var uriContent = "data:application/octet-stream," + encodeURIComponent($("#templateData").val());
		window.open(uriContent, 'Save');		
	}

	function openPage() {
		$("#templateData").html("bar");
	}

	function renderPage(template, article) {
		console.time("renderPage");
		var renderer = new ds.ArticleRenderer();
		var actualOutput = renderer.renderPage(template, article);
		console.timeEnd("renderPage");
		return actualOutput;
	};


</script>

</head>
<body>
	<form>
		<input id="savePage" type="button" value="Save">
		<input id="openPage" type="button" value="Open">
	</form>
	<textarea id="templateData" class="code" wrap="logical" style="height: 300px; width: 700px; " />
</body>
</html>
